<div class="container mx-auto px-4 py-6">
  <div class="filter-section bg-white shadow-md rounded-lg p-6 mb-6">
    <div class="flex flex-wrap items-center gap-4">
      <button id="cursor-pointer dropdownHoverButtonplatforms" data-dropdown-toggle="dropdownHoverplatforms"
              data-dropdown-trigger="hover"
              class="cursor-pointer text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
              type="button">
        Console
        <svg class="w-2.5 h-2.5 ms-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
             viewBox="0 0 10 6">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
        </svg>
      </button>

      <!-- Dropdown menu -->
      <div id="dropdownHoverplatforms"
           class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700">
        <ul class="py-2 text-sm text-gray-700 dark:text-gray-200 list-none p-0 my-0"
            aria-labelledby="dropdownHoverButtonplatforms">
          <li *ngFor="let platform of platforms" (click)="selectedPlatform = platform; applyFilters()">
            <a
              class="cursor-pointer block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">{{ platform }}</a>
          </li>
        </ul>
      </div>

      <button id="dropdownHoverButtongenres" data-dropdown-toggle="dropdownHovergenres" data-dropdown-trigger="hover"
              class="cursor-pointer text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
              type="button">
        Genre
        <svg class="w-2.5 h-2.5 ms-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
             viewBox="0 0 10 6">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
        </svg>
      </button>

      <!-- Dropdown menu -->
      <div id="dropdownHovergenres"
           class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700">
        <ul class="py-2 text-sm text-gray-700 dark:text-gray-200 list-none p-0 my-0"
            aria-labelledby="dropdownHoverButtongenres">
          <li *ngFor="let genre of genres" (click)="selectedGenre = genre; applyFilters()">
            <a
              class="cursor-pointer block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">{{ genre }}</a>
          </li>
        </ul>
      </div>

      <button id="dropdownHoverButtonboxConditionss" data-dropdown-toggle="dropdownHoverboxConditions"
              data-dropdown-trigger="hover"
              class="cursor-pointer text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
              type="button">
        Etat du produit
        <svg class="w-2.5 h-2.5 ms-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
             viewBox="0 0 10 6">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
        </svg>
      </button>

      <!-- Dropdown menu -->
      <div id="dropdownHoverboxConditions"
           class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700">
        <ul class="py-2 text-sm text-gray-700 dark:text-gray-200 list-none p-0 my-0"
            aria-labelledby="dropdownHoverButtonboxConditions">
          <li *ngFor="let boxCondition of boxConditions" (click)="selectedBoxCondition = boxCondition; applyFilters()">
            <a
              class="cursor-pointer block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">{{ boxCondition }}</a>
          </li>
        </ul>
      </div>

      <!-- Price Input -->
      <div class="flex items-center space-x-2">
        <label class="text-sm font-medium text-gray-700">Prix maximum</label>
        <input
          type="number"
          class="price-input form-input rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
          [(ngModel)]="selectedPrice"
          (input)="applyFilters()"
          placeholder="Prix max"
          min="0"
          step="10">
        <span *ngIf="selectedPrice !== null" class="text-sm text-gray-600">
          {{ selectedPrice | currency:'EUR' }}
        </span>
      </div>

      <!-- Reset Filters Button -->
      <button
        (click)="resetFilters()"
        class="btn-reset bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded transition duration-300">
        R√©initialiser
      </button>
    </div>

    <!-- Active Filters Display -->
    <div class="active-filters mt-4 flex items-center space-x-2 text-sm text-gray-600">
      <span *ngIf="selectedPlatform" class="filter-tag">{{ selectedPlatform }}</span>
      <span *ngIf="selectedGenre" class="filter-tag">{{ selectedGenre }}</span>
      <span *ngIf="selectedBoxCondition" class="filter-tag">{{ selectedBoxCondition }}</span>
      <span *ngIf="selectedPrice" class="filter-tag">Prix max: {{ selectedPrice | currency:'EUR' }}</span>
    </div>
  </div>

  <!-- Game List -->
  <div class="game-list grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <div *ngFor="let game of filteredGames" class="game-card group ">
      <div class="flex justify-end">

        <a (click)="addFavori(game.id)">
          <svg
            class="star"
            width="46"
            height="46"
            [attr.fill]="game.favorites ? '#FFD700' : 'none'"
            stroke="#ffffff"
            stroke-linejoin="round"
            stroke-width="1.5"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M12 2.5 8.942 8.739 2 9.746l5.03 4.916L5.826 21.5 12 18.21l6.174 3.29-1.194-6.838L22 9.746l-6.904-1.007L11.999 2.5Z"
            ></path>
          </svg>
        </a>
      </div>
      <h3 class="game-title">{{ game.title }}</h3>
      <div class="game-details">
        <div class="grid grid-cols-2 gap-2">
          <div>
            <strong>Plateforme:</strong>
            <span>{{ game.platform }}</span>
          </div>
          <div>
            <strong>Genre:</strong>
            <span>{{ game.genre }}</span>
          </div>
          <div>
            <strong>D√©veloppeur:</strong>
            <span>{{ game.developer }}</span>
          </div>
          <div>
            <strong>√âditeur:</strong>
            <span>{{ game.publisher }}</span>
          </div>
          <div>
            <strong>Ann√©e:</strong>
            <span>{{ game.release_year }}</span>
          </div>
          <div>
            <strong>√âtat:</strong>
            <span>{{ game.box_condition }} / {{ game.cartridge_condition }}</span>
          </div>
        </div>

        <div class="mt-4 flex justify-between items-center">
          <p class="text-lg font-bold">
            <strong>Prix:</strong> {{ game.purchase_price | currency:'EUR' }}
          </p>
          <span *ngIf="game.collection" class="badge">Collection</span>
        </div>

        <div class="game-actions mt-4 flex space-x-4">
          <button
            (click)="deleteGame(game.id)"
            class="btn btn-delete flex-grow flex items-center justify-center">
            <i class="mr-2">üóëÔ∏è</i> Supprimer
          </button>
          <button
            [routerLink]="['/game', game?.id]"
            class="btn btn-edit flex-grow flex items-center justify-center">
            <i class="mr-2">‚úèÔ∏è</i> Modifier
          </button>
          <button
            [routerLink]="['/game/rating', game?.id]"
            class="btn btn-edit flex-grow flex items-center justify-center">
             Not√© / Commentaire
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
